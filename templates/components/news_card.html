{% load custom_filters %}
<div class="news-item bg-white rounded-lg shadow-md overflow-hidden">
    {% with news.images.all.0 as first_image %}
        {% if first_image %}
            <img src="{{ first_image.image.url }}" alt="{{ news.title }}">
        {% endif %}
    {% endwith %}
    <div class="p-6">
        <h2 class="text-xl font-bold mb-2">{{news.title}}</h2>
        <p class="text-gray-600 mb-4">Posted by <span class="font-semibold">{{news.author.userprofile.full_name}}</span> • {{news.published_date|time_since}}</p>
        <div class="flex items-center mb-4">
        <span class="bg-{{ news.category.name|get_color_for_category }}-100 text-{{ news.category.name|get_color_for_category }}-800 text-xs font-medium px-2.5 py-0.5 rounded">{{news.category}}</span>
        </div>
        <p class="text-gray-700 mb-4 line-clamp-2">{{news.desc}}</p>
        <div class="flex justify-between items-center">
        <div class="flex space-x-4 text-gray-500">
            <span class="flex items-center">
            <i class="far fa-eye mr-1"></i> {{news.views_count}}
            </span>
            <span class="flex items-center">
            <i class="far fa-comment mr-1"></i> {{news.comments_count}}
            </span>
        </div>
        <div class="flex space-x-2">
            <button class="text-blue-500 hover:text-blue-700">
            <i class="fab fa-facebook"></i>
            </button>
            <button class="text-blue-400 hover:text-blue-600">
            <i class="fab fa-twitter"></i>
            </button>
            <button class="text-red-500 hover:text-red-700">
            <i class="fab fa-youtube"></i>
            </button>
        </div>
        <a href="/news/details/{{news.slug}}" class="text-blue-600 hover:text-blue-800 font-medium">Read More →</a>
        </div>
    </div>
</div>
<script>
    function getColorForCategory(category) {
        const colors = {
            'Politics': 'red',
            'Technology': 'purple',
            'Business': 'yellow',
            'Sports': 'green',
            'Entertainment': 'pink',
            'Health': 'red',
            'Science': 'yellow',
            'World': 'blue',
            'Environment': 'blue',
            'Community': 'green',
            'Local': 'blue',
            'Global': 'green',
            'Research': 'purple',
            'Finance': 'yellow'
        };
        return colors[category] || 'gray';
    }
</script>